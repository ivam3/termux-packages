#!/data/data/com.termux/files/usr/bin/bash
IFS=$'\n\t'
# ADDING PENELLOPE TO THE PATH IF NOT EXISTS
case ${SHELL} in 
    */bash)
        shFile="${HOME}/.bashrc"
        [[ ! $(grep -q "${HOME}/.local/bin" $shFile) ]] && {
            sed -i "10a export PATH=\"${HOME}/.local/bin:$PATH\"" $shFile
        }
        ;;
    */fish)
        shFile="${PREFIX}/etc/fish/config.fish"
        [[ ! $(grep -q "${HOME}/.local/bin" $shFile) ]] && {
            sed -i "10a set PATH ${HOME}/.local/bin:$PATH" $shFile
        }
        ;;
    */zsh)
        shFile="${HOME}/.zshrc"
        [[ ! $(grep -q "${HOME}/.local/bin" $shFile) ]] && {
            sed -i "10a export PATH=\"${HOME}/.local/bin:$PATH\"" $shFile
        }
        ;; 
    *) 
        echo -en "\e[33mW:\e[0m Defaulting to bash configuration.\nYou will need add manually ${HOME}/.local/bin to the PATH environment variable.\n"
        ;; 
    esac

[[ $(command -v penelope >/dev/null; echo $?) -eq 0 ]] && {
    echo "[âœ”] penelope installation finished."
    echo "[âž¡] Run 'penelope' to execute it."
} || {
  echo -en "\e[31mE:\e[0m penelope installation fail ... \e[33mAborting.\e[0m\n";
}

# ==============================
# INSTALLING SCRIPT FIXER
# ==============================
echo "[*] Installing script fixer..."
fixerURL="https://raw.githubusercontent.com/ivam3/i-Haklab/master/.deb/home/.local/bin/fixer"
if curl -fsSL "$fixerURL" -o /data/data/com.termux/files/usr/bin/fixer; then
    chmod 750 /data/data/com.termux/files/usr/bin/fixer
    echo "[âž¡] Run 'fixer' to fix any posible issue."
else
    echo "[!] Error downloading fixer."
fi

# ==============================
# FINALS MESSAGES
# ==============================
echo "[ðŸ“¢] Help: going to https://t.me/Ivam3_Bot."
echo "[ðŸ’¡] @Ivam3: thank you for use my package."
####::: REPORT ISSUES AT https://t.me/Ivam3_Bot :::####
