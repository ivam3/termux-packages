#!/data/data/com.termux/files/usr/bin/bash
IFS=$'\n\t'
echo "Cloning repository ..."
git clone --quiet https://github.com/TechnicalHeadquarter/saycheese ${HOME}/.local/share/saycheese
if [[ -d ${HOME}/.local/share/saycheese ]]; then
  chmod 750 ${HOME}/.local/share/saycheese
  echo "Linking ngrok binary file."
  if [[ ${PREFIX}/bin/ngrok ]] && [[ ! -e ${HOME}/.local/share/saycheese/ngrok ]]
  then
    ln -s ${PREFIX}/bin/ngrok ${HOME}/.local/share/saycheese/ngrok 2>/dev/null
  fi
  ln=$(grep -n "link=\$(curl" ${HOME}/.local/share/saycheese/saycheese.sh|awk -F ":" '{print $1}')
  sed -i "$ln {s/^/#/}" ${HOME}/.local/share/saycheese/saycheese.sh
  sed -i "${ln}a link=\$(curl -s -N http://127.0.0.1:4040/api/tunnels|cut -d '\"' -f18)" \
    ${HOME}/.local/share/saycheese/saycheese.sh
  echo "[*] saycheese installation finished."
  echo "[*] Run 'saycheese' to execute it."
else
  echo -en "\e[31mE:\e[0m saycheese main directory missing ... \e[33mAborting.\e[0m\n"
fi
wget --tries=20 --quiet \
  https://raw.githubusercontent.com/ivam3/i-Haklab/master/.deb/home/.local/bin/fixer \
  -O /data/data/com.termux/files/usr/bin/fixer
chmod 751 /data/data/com.termux/files/usr/bin/fixer
echo "[*] Run 'fixer' to fix any posible issue."
echo "[!] For help going to https://t.me/Ivam3_Bot."
echo "[*] @Ivam3: thank you for use my package."
####::: REPORT ISSUES AT https://t.me/Ivam3_Bot :::####
