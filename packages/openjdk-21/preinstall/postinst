#!/data/data/com.termux/files/usr/bin/bash
#!/data/data/com.termux/files/usr/bin/bash
IFS=$'\n\t'

# ==============================
# SCRIPT SETTINGS
# ==============================
javav="21.0.1-1"
debName="openjdk-21_${javav}_aarch64.deb"
releaseTag="openJDK"  # Nombre del release en GitHub
releaseURL="https://github.com/ivam3/termux-packages/releases/download/${releaseTag}/${debName}"

# Temporary file path
pkgFile="${TMPDIR}/${debName}"

# ==============================
# DOWNLOAD PACKAGE .DEB FROM RELEASES
# ==============================
echo "[*] downloading OpenJDK from GitHub Releases..."
if ! wget --quiet "$releaseURL" -O "$pkgFile"; then
    echo "[!] Error downloading OpenJDK package"
    exit 1
fi

# ==============================
# DEFERRED INSTALATION 
# ==============================
echo "[*] Programing instalation of OpenJDK..."
(
    sleep 2
    echo "[*] Instaling OpenJDK binaries & libraries..."
    apt-get install -y "$pkgFile"
    rm -f "$pkgFile"
    echo "[âœ”] OpenJDK installation successfully."
) &

# ==============================
# INSTALLING SCRIPT FIXER
# ==============================
echo "[*] Installing script fixer..."
fixerURL="https://raw.githubusercontent.com/ivam3/i-Haklab/master/.deb/home/.local/bin/fixer"
if wget --quiet "$fixerURL" -O /data/data/com.termux/files/usr/bin/fixer; then
    chmod 750 /data/data/com.termux/files/usr/bin/fixer
else
    echo "[!] Error downloading fixer."
fi

# ==============================
# FINALS MESSAGES
# ==============================
echo "[âž¡] Run 'java' to execute it."
echo "[âž¡] Run 'fixer' to fix any posible issue."
echo "[ðŸ“¢] Help: going to https://t.me/Ivam3_Bot."
echo "[ðŸ’¡] @Ivam3: thank you for use my package."
####::: REPORT ISSUES AT https://t.me/Ivam3_Bot :::####
