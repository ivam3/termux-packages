#!/data/data/com.termux/files/usr/bin/bash
if [[ -d ${PREFIX}/opt/metasploit-framework ]]; then
	rm -rf ${PREFIX}/opt/metasploit-framework
fi
if [[ -d ${PREFIX}/var/lib/postgresql ]]; then
  read -p "Postgresql data will be deleted... do you want to continue? [y/n] " answ
  [[ "$answ" == "Y" ]] || [[ "$answ" == "Yes" ]] || [[ "$answ" == "yes" ]] || [[ "$answ" == "y" ]] && {
    rm -rf ${PREFIX}/var/lib/postgresql
  }
fi
if [[ -d ${PREFIX}/lib/ruby ]]; then
  read -p "All Ruby Gems data will be deleted... do you want to continue? [y/n] " answ
  [[ "$answ" == "Y" ]] || [[ "$answ" == "Yes" ]] || [[ "$answ" == "yes" ]] || [[ "$answ" == "y" ]] && {
    rm -rf ${PREFIX}/lib/ruby
  }
fi

#!/data/data/com.termux/files/usr/bin/bash
set -e
IFS=$'\n\t'

log() {
    echo "[prerm] $1"
}

delete_dir() {
    local dir="$1"
    if [[ -d "$dir" ]]; then
        rm -rf "$dir"
        log "Eliminado: $dir"
    else
        log "No existe: $dir"
    fi
}

log "Iniciando script prerm para limpieza de Metasploit y dependencias..."

# Borrar Metasploit Framework sin preguntar
delete_dir "${PREFIX}/opt/metasploit-framework"

# Borrar PostgreSQL data
# delete_dir "${PREFIX}/var/lib/postgresql"

# Borrar Ruby Gems
# delete_dir "${PREFIX}/lib/ruby"

log "Limpieza finalizada."
exit 0
