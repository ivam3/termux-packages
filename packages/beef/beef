#!/data/data/com.termux/files/usr/bin/bash
# COLORS
W="\e[0m"
R="\e[31m"
G="\e[32m"
Y="\e[33m"
B="\e[34m"
msfPATH="$PREFIX/opt/metasploit-framework"
#::: Fix ruby bigdecimal extensions linking error :::#
RUBYv=$(ls $PREFIX/lib/ruby |grep -m 1 '[0-9].[0-9].[0-9]')
LINUXANDROID=$(find $PREFIX/lib/ruby/$RUBYv -iname "bigdecimal.so"|awk -F "/" '{print $10}')
export LD_PRELOAD="$LD_PRELOAD:$PREFIX/lib/ruby/$RUBYv/$LINUXANDROID/bigdecimal.so"

if [[ -d ${HOME}/.local/share/beef ]]
then
  cd ${HOME}/.local/share/$(basename $0) >/dev/null
  echo "load msgrpc ServerHost=127.0.0.1 ServerPort=55552 User=msf Pass='abc123' SSL=y" \
    > $msfPATH/beef.rc
	echo -en "$Y(➤_) In a new session run :$W\n      msfconsole -r $msfPATH/beef.rc\n\n$G(_➤)$W then press$G enter$W to continue\n"
  read enter
  $(command -v ruby) $(basename $0) ${@:1}
else
  echo -en $R"E:$W $(basename $0) PATH missing ...$Y Aborting.$W"
  exit 1
fi
####::: REPORT ISSUES AT https://t.me/Ivam3_Bot :::####
