#!/data/data/com.termux/files/usr/bin/bash
IFS=$'\n\t'
JTRv="1.8.0"
JTRtar="https://download.openwall.net/pub/projects/john/contrib/android/john-$JTRv-android-1.tar.gz"
JTR="${HOME}/.local/share/johntheripper"

echo "Cloning repository ..."
git clone --quiet https://github.com/openwall/john $JTR
wget --tries=20 --quiet $JTRtar -O ${TMPDIR}/john-$JTRv-android-1.tar.gz

[[ -d ${HOME}/.local/share/johntgeripper ]] && [[ -e ${TMPDIR}/john-$JTRv-android-1.tar.gz ]] && {
  tar -xvzf ${TMPDIR}/john-$JTRv-android-1.tar.gz -C $TMPDIR
  rm -rf $TMPDIR/john-$JTRv-android-1.tar.gz
  mv $TMPDIR/john-$JTRv-android/user/* $JTR
  ln -s $JTR/john.conf $JTR/john.ini
  sleep 2
  case $(uname -m) in
    aarch64)
      mv $TMPDIR/john-$JTRv-android/libs/arm64-v8a/* $JTR
      ;;
    arm)
      mv $TMPDIR/john-$JTRv-android/libs/armeabi/* $JTR
      ;;
    armhf)
      mv $TMPDIR/john-$JTRv-android/libs/armeabi-v7a/* $JTR
      ;;
    i686)
      mv $TMPDIR/john-$JTRv-android/libs/x86/* $JTR
      ;;
    x86_64)
      mv $TMPDIR/john-$JTRv-android/libs/x86_64/* $JTR
      ;;
  esac
  rm -rf $TMPDIR/john-$JTRv-android
  chmod +x $JTR/*
} || {
  echo -en "\e[31mE:\e[0m johntheripper directory missing ... \e[33mAborting.\e[0m\n";
  exit 1;
}
exit 0
####::: REPORT ISSUES AT https://t.me/Ivam3_Bot :::####
